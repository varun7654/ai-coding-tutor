{"version":3,"file":"static/js/843.55b31125.chunk.js","mappings":"gMAIe,SAASA,IACpB,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,MAuCxC,OAtCAC,EAAAA,EAAAA,YAAU,KACN,IAAIC,EAAOJ,EAAaK,IAAI,QAC5BJ,EAAgB,CAAC,GACbG,GACAE,MAAMC,EAAAA,GAAc,CAChBC,OAAQ,OACRC,QAAS,CACL,eAAgB,mBAChB,aAAc,mCACdC,OAAQ,oBAEZC,KAAMC,KAAKC,UAAU,CAACT,WAErBU,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACF,GAAIA,EAAOC,MAAO,CACdC,aAAaC,QAAQ,QAASH,EAAOC,OACrC,IAAIG,EAAgBF,aAAaG,QAAQ,iBAEnB,OAAlBD,QAA4CE,IAAlBF,GAAiD,KAAlBA,GAA0C,cAAlBA,GACjFG,OAAOC,SAASC,KAAOL,EACvBF,aAAaC,QAAQ,gBAAiB,KAEtCI,OAAOC,SAASC,KAAO,GAE/B,MACIC,QAAQC,MAAMX,EAClB,IAGHY,OAAMD,IACHD,QAAQC,MAAMA,EAAM,GAEhC,GAED,KAICE,EAAAA,EAAAA,KAAA,OAAAC,UACID,EAAAA,EAAAA,KAAA,MAAAC,SAAI,mBAGhB,C","sources":["auth/LoginSuccess.tsx"],"sourcesContent":["import {useSearchParams} from \"react-router-dom\";\r\nimport {useEffect} from \"react\";\r\nimport {AUTH_API_URL} from \"../App\";\r\n\r\nexport default function LoginSuccess() {\r\n    const [searchParams, setSearchParams] = useSearchParams();\r\n    useEffect(() => {\r\n        let code = searchParams.get(\"code\");\r\n        setSearchParams({});\r\n        if (code) {\r\n            fetch(AUTH_API_URL, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"content-type\": \"application/json\",\r\n                    \"user-agent\": \"cloudflare-worker-ai-tutor-login\",\r\n                    accept: \"application/json\",\r\n                },\r\n                body: JSON.stringify({code})\r\n            })\r\n                .then(response => response.json())\r\n                .then(result => {\r\n                    if (result.token) {\r\n                        localStorage.setItem(\"token\", result.token);\r\n                        let loginRedirect = localStorage.getItem(\"loginRedirect\");\r\n\r\n                        if (loginRedirect !== null && loginRedirect !== undefined && loginRedirect !== \"\" && loginRedirect !== \"undefined\") {\r\n                            window.location.href = loginRedirect;\r\n                            localStorage.setItem(\"LoginRedirect\", \"\");\r\n                        } else {\r\n                            window.location.href = \"/\";\r\n                        }\r\n                    } else {\r\n                        console.error(result);\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n                    console.error(error);\r\n                });\r\n        }\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Logging in...</h1>\r\n        </div>\r\n    )\r\n}"],"names":["LoginSuccess","searchParams","setSearchParams","useSearchParams","useEffect","code","get","fetch","AUTH_API_URL","method","headers","accept","body","JSON","stringify","then","response","json","result","token","localStorage","setItem","loginRedirect","getItem","undefined","window","location","href","console","error","catch","_jsx","children"],"sourceRoot":""}